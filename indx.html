<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار الذكاء العالمي - إعداد إياد شادي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        /* جميع أنماط CSS الأصلية تبقى كما هي */
        :root {
            --primary: #6c5ce7;
            --primary-dark: #5649c0;
            --primary-light: #a29bfe;
            --secondary: #00cec9;
            --secondary-dark: #00a8a4;
            --accent: #fd79a8;
            --accent-dark: #e66797;
            --light: #f8f9fa;
            --light-gray: #e0e0e0;
            --medium-gray: #b0b0b0;
            --dark: #343a40;
            --dark-gray: #555;
            --success: #00b894;
            --success-dark: #00997a;
            --warning: #fdcb6e;
            --warning-dark: #f5b945;
            --danger: #d63031;
            --danger-dark: #c02a2a;
            --info: #0984e3;
            --gold: #ffd700;
            --silver: #c0c0c0;
            --bronze: #cd7f32;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e6e9f0 50%, #d6dae4 100%);
            min-height: 100vh;
            color: var(--dark);
            line-height: 1.6;
            background-attachment: fixed;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }
        
        /* صفحة البيانات الشخصية */
        .user-info-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 35px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            text-align: center;
            display: block;
        }
        
        .user-info-container h2 {
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 25px;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: right;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--light-gray);
            border-radius: 10px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.2);
        }
        
        .start-btn {
            background: linear-gradient(90deg, var(--primary), var(--accent));
            color: white;
            padding: 15px 40px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            font-weight: bold;
        }
        
        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(108, 92, 231, 0.3);
        }

        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(108, 92, 231, 0.1) 0%, rgba(108, 92, 231, 0) 70%);
            z-index: 0;
            animation: rotate 30s linear infinite;
        }
        
        header h1 {
            color: var(--primary);
            font-size: 2.8rem;
            margin-bottom: 15px;
            position: relative;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            font-weight: 800;
        }
        
        header p {
            color: var(--dark-gray);
            font-size: 1.2rem;
            line-height: 1.7;
            margin-bottom: 15px;
            position: relative;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .header-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            position: relative;
        }
        
        .header-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--primary);
            font-size: 0.9rem;
        }
        
        .header-icon i {
            font-size: 1.8rem;
            margin-bottom: 5px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* Progress Bar */
        .progress-container {
            width: 100%;
            height: 12px;
            background-color: var(--light-gray);
            border-radius: 6px;
            margin: 25px 0;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            width: 0%;
            transition: width 0.5s cubic-bezier(0.65, 0, 0.35, 1);
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                            rgba(255, 255, 255, 0.8) 0%, 
                            rgba(255, 255, 255, 0) 50%, 
                            rgba(255, 255, 255, 0.8) 100%);
            animation: shine 2s infinite;
        }
        
        /* Question Container */
        .question-container {
            background: white;
            padding: 35px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            transform: translateY(0);
            opacity: 1;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .question-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary), var(--accent));
        }
        
        .question-container.hidden {
            transform: translateY(30px);
            opacity: 0;
            position: absolute;
            visibility: hidden;
        }
        
        .question-number {
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
        }
        
        .question-number i {
            margin-left: 8px;
            font-size: 1.1rem;
        }
        
        .question-text {
            font-size: 1.4rem;
            margin-bottom: 25px;
            line-height: 1.7;
            color: var(--dark);
            font-weight: 500;
        }
        
        /* Options Container */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .option {
            padding: 18px 20px;
            background-color: var(--light);
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
        }
        
        .option:hover {
            background-color: #f5f5f5;
            border-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .option.selected {
            background-color: var(--primary-light);
            color: white;
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(108, 92, 231, 0.3);
        }
        
        .option.selected .option-label {
            color: white;
        }
        
        .option input {
            opacity: 0;
            position: absolute;
        }
        
        .option-label {
            display: flex;
            align-items: center;
            width: 100%;
            color: var(--dark);
            transition: color 0.3s ease;
        }
        
        .option-circle {
            width: 24px;
            height: 24px;
            border: 2px solid var(--medium-gray);
            border-radius: 50%;
            margin-left: 15px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .option.selected .option-circle {
            border-color: white;
            background-color: white;
        }
        
        .option-circle-inner {
            width: 12px;
            height: 12px;
            background-color: var(--primary);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .option.selected .option-circle-inner {
            opacity: 1;
        }
        
        /* Navigation Buttons */
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            position: relative;
        }
        
        button {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        button::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        button:hover::after {
            opacity: 1;
        }
        
        .btn-next {
            background: linear-gradient(90deg, var(--primary), var(--accent));
            color: white;
        }
        
        .btn-prev {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        .btn-submit {
            background: linear-gradient(90deg, var(--success), #55efc4);
            color: white;
            display: none;
        }
        
        button i {
            margin: 0 5px;
            font-size: 1.1rem;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            background: var(--light-gray);
            color: var(--medium-gray);
            border: none;
        }
        
        button:disabled:hover::after {
            opacity: 0;
        }
        
        /* Timer */
        .timer {
            text-align: center;
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--primary);
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 12px 20px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }
        
        .timer i {
            margin-left: 10px;
            font-size: 1.2rem;
        }
        
        /* Result Container */
        .result-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: none;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .result-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }
        
        .result-container h2 {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 30px;
            font-weight: 800;
            position: relative;
            display: inline-block;
        }
        
        .result-container h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 2px;
        }
        
        .iq-score-container {
            position: relative;
            margin: 30px auto;
            width: 200px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .iq-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 15px solid var(--light-gray);
        }
        
        .iq-circle-fill {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 15px solid;
            border-image-slice: 1;
            clip-path: inset(0 50% 0 0);
            transform: rotate(0deg);
            transition: transform 2s ease-in-out;
        }
        
        .iq-score {
            font-size: 4.5rem;
            font-weight: bold;
            z-index: 2;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
        }
        
        .iq-category {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .iq-description {
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 30px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            color: var(--dark-gray);
        }
        
        .result-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .stat-box {
            background: var(--light);
            padding: 20px;
            border-radius: 15px;
            min-width: 150px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: var(--medium-gray);
            font-size: 0.9rem;
        }
        
        .share-container {
            margin-top: 40px;
        }
        
        .share-title {
            font-size: 1.2rem;
            color: var(--dark-gray);
            margin-bottom: 15px;
        }
        
        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .share-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .share-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .share-btn:hover::after {
            opacity: 1;
        }
        
        .facebook {
            background-color: #3b5998;
        }
        
        .twitter {
            background-color: #1da1f2;
        }
        
        .whatsapp {
            background-color: #25d366;
        }
        
        .linkedin {
            background-color: #0077b5;
        }
        
        .share-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .retake-btn {
            margin-top: 30px;
            background: linear-gradient(90deg, var(--secondary), #55efc4);
            color: white;
            padding: 15px 40px;
            font-size: 1.2rem;
        }
        
        /* Badges */
        .badges-container {
            margin: 30px 0;
        }
        
        .badge {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            margin: 5px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .badge-gold {
            background: linear-gradient(135deg, var(--gold), #ffc800);
            color: #7f6000;
        }
        
        .badge-silver {
            background: linear-gradient(135deg, var(--silver), #a8a8a8);
            color: #505050;
        }
        
        .badge-bronze {
            background: linear-gradient(135deg, var(--bronze), #b87333);
            color: #5a3a1a;
        }
        
        /* Loading Spinner */
        .spinner {
            display: none;
            width: 70px;
            height: 70px;
            margin: 30px auto;
            position: relative;
        }
        
        .spinner-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 8px solid rgba(108, 92, 231, 0.1);
            border-radius: 50%;
            border-top: 8px solid var(--primary);
            animation: spin 1.5s linear infinite;
        }
        
        .spinner-circle:nth-child(2) {
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            border: 8px solid rgba(108, 92, 231, 0.1);
            border-top: 8px solid var(--accent);
            animation: spin-reverse 2s linear infinite;
        }
        
        /* Footer */
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 30px;
            color: var(--dark-gray);
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        footer p {
            margin-bottom: 10px;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }
        
        .footer-link {
            color: var(--primary);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-link:hover {
            color: var(--accent);
            text-decoration: underline;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes spin-reverse {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(-360deg); }
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }
        
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
            font-weight: normal;
        }
        
        .tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--dark) transparent transparent transparent;
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            header {
                padding: 20px 15px;
            }
            
            header h1 {
                font-size: 2.2rem;
            }
            
            header p {
                font-size: 1.1rem;
            }
            
            .question-container {
                padding: 25px 20px;
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .option {
                padding: 15px;
                font-size: 1.1rem;
            }
            
            .result-container {
                padding: 30px 20px;
            }
            
            .iq-score {
                font-size: 3.5rem;
            }
            
            .iq-category {
                font-size: 1.8rem;
            }
            
            .iq-description {
                font-size: 1.1rem;
            }
            
            .stat-box {
                min-width: 120px;
                padding: 15px;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
            
            button {
                padding: 12px 25px;
                font-size: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            header h1 {
                font-size: 1.8rem;
            }
            
            .question-text {
                font-size: 1.1rem;
            }
            
            .option {
                padding: 12px;
                font-size: 1rem;
            }
            
            .navigation {
                flex-direction: column-reverse;
                gap: 15px;
            }
            
            button {
                width: 100%;
            }
            
            .iq-score-container {
                width: 150px;
                height: 150px;
            }
            
            .iq-score {
                font-size: 3rem;
            }
            
            .iq-circle, .iq-circle-fill {
                border-width: 10px;
            }
            
            .result-stats {
                flex-direction: column;
                gap: 15px;
                align-items: center;
            }
            
            .stat-box {
                width: 100%;
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- صفحة إدخال البيانات الشخصية -->
        <div class="user-info-container" id="userInfoContainer">
            <h2><i class="fas fa-user-circle"></i> معلومات المشارك</h2>
            <p>يرجى إدخال معلوماتك الشخصية قبل بدء الاختبار</p>
            
            <div class="form-group">
                <label for="userName">الاسم الكامل:</label>
                <input type="text" id="userName" required placeholder="أدخل اسمك هنا">
            </div>
            
            <div class="form-group">
                <label for="userAge">العمر:</label>
                <input type="number" id="userAge" required min="10" max="100" placeholder="أدخل عمرك هنا">
            </div>
            
            <div class="form-group">
                <label for="userEmail">البريد الإلكتروني (اختياري):</label>
                <input type="email" id="userEmail" placeholder="أدخل بريدك الإلكتروني هنا">
            </div>
            
            <button class="start-btn" id="startBtn">
                بدء الاختبار <i class="fas fa-arrow-left"></i>
            </button>
            
            <div class="footer" style="margin-top: 30px; color: var(--dark-gray);">
                <p>إنشاء وتطوير: <strong>إياد شادي</strong></p>
            </div>
        </div>
        
        <!-- صفحة الاختبار الرئيسية -->
        <header class="fade-in" id="quizHeader" style="display: none;">
            <h1><i class="fas fa-brain"></i> اختبار الذكاء العالمي</h1>
            <p>اختبار الذكاء المتقدم هذا مكون من 25 سؤالاً صعباً لقياس قدراتك العقلية في مختلف المجالات</p>
            
            <div class="header-icons">
                <div class="header-icon">
                    <i class="fas fa-question-circle"></i>
                    <span>25 سؤالاً</span>
                </div>
                <div class="header-icon">
                    <i class="fas fa-clock"></i>
                    <span>30 دقيقة</span>
                </div>
                <div class="header-icon">
                    <i class="fas fa-chart-line"></i>
                    <span>نتيجة دقيقة</span>
                </div>
            </div>
            
            <div class="timer" id="timer">
                <i class="fas fa-stopwatch"></i> الوقت المتبقي: 30:00
            </div>
        </header>
        
        <div class="progress-container" id="progressContainer" style="display: none;">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div id="quizContainer" style="display: none;">
            <!-- Questions will be dynamically inserted here -->
        </div>
        
        <div class="navigation" id="quizNavigation" style="display: none;">
            <button class="btn-prev" id="prevBtn" disabled>
                <i class="fas fa-arrow-right"></i> السابق
            </button>
            <button class="btn-next" id="nextBtn">
                التالي <i class="fas fa-arrow-left"></i>
            </button>
            <button class="btn-submit" id="submitBtn">
                عرض النتيجة <i class="fas fa-trophy"></i>
            </button>
        </div>
        
        <div class="spinner" id="spinner">
            <div class="spinner-circle"></div>
            <div class="spinner-circle"></div>
        </div>
        
        <div class="result-container" id="resultContainer">
            <h2>نتيجة اختبار الذكاء</h2>
            
            <div class="iq-score-container">
                <div class="iq-circle"></div>
                <div class="iq-circle-fill" id="iqCircleFill"></div>
                <div class="iq-score" id="iqScore">0</div>
            </div>
            
            <div class="iq-category" id="iqCategory"></div>
            <div class="iq-description" id="iqDescription"></div>
            
            <div class="result-stats">
                <div class="stat-box">
                    <div class="stat-value" id="correctAnswers">0</div>
                    <div class="stat-label">إجابات صحيحة</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="timeTaken">0:00</div>
                    <div class="stat-label">الوقت المستغرق</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="percentile">0%</div>
                    <div class="stat-label">النسبة المئوية</div>
                </div>
            </div>
            
            <div class="badges-container" id="badgesContainer">
                <!-- Badges will be added here dynamically -->
            </div>
            
            <div class="share-container">
                <div class="share-title">شارك نتيجتك مع أصدقائك</div>
                <div class="share-buttons">
                    <div class="share-btn facebook">
                        <i class="fab fa-facebook-f"></i>
                    </div>
                    <div class="share-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </div>
                    <div class="share-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </div>
                    <div class="share-btn linkedin">
                        <i class="fab fa-linkedin-in"></i>
                    </div>
                    <div class="share-btn" style="background-color: var(--primary);" id="copyBtn">
                        <i class="fas fa-copy"></i>
                    </div>
                </div>
            </div>
            
            <button class="retake-btn" id="retakeBtn">
                <i class="fas fa-redo"></i> إعادة الاختبار
            </button>
        </div>
        
        <footer>
            <p>تم تطوير هذا الاختبار بدقة لقياس القدرات العقلية والذكاء العام</p>
            <p>اختبار الذكاء العالمي &copy; <span id="year"></span>. جميع الحقوق محفوظة.</p>
            <p>إنشاء وتطوير: <strong>إياد شادي</strong></p>
            
            <div class="footer-links">
                <a href="#" class="footer-link">شروط الاستخدام</a>
                <a href="#" class="footer-link">سياسة الخصوصية</a>
                <a href="#" class="footer-link">اتصل بنا</a>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('year').textContent = new Date().getFullYear();
            
            // متغيرات لتخزين بيانات المستخدم
            let userName = '';
            let userAge = '';
            let userEmail = '';
            
            // عناصر DOM لصفحة البيانات الشخصية
            const userInfoContainer = document.getElementById('userInfoContainer');
            const startBtn = document.getElementById('startBtn');
            const quizHeader = document.getElementById('quizHeader');
            const quizContainer = document.getElementById('quizContainer');
            const progressContainer = document.getElementById('progressContainer');
            const progressBar = document.getElementById('progressBar');
            const navigation = document.getElementById('quizNavigation');
            
            // إخفاء عناصر الاختبار في البداية
            quizHeader.style.display = 'none';
            quizContainer.style.display = 'none';
            progressContainer.style.display = 'none';
            navigation.style.display = 'none';
            document.getElementById('resultContainer').style.display = 'none';
            document.getElementById('spinner').style.display = 'none';
            
            // بدء الاختبار عند الضغط على الزر
            startBtn.addEventListener('click', function() {
                userName = document.getElementById('userName').value.trim();
                userAge = document.getElementById('userAge').value.trim();
                userEmail = document.getElementById('userEmail').value.trim();
                
                if (!userName || !userAge) {
                    alert('الرجاء إدخال الاسم والعمر');
                    return;
                }
                
                if (parseInt(userAge) < 10 || parseInt(userAge) > 100) {
                    alert('الرجاء إدخال عمر بين 10 و 100 سنة');
                    return;
                }
                
                // إخفاء صفحة البيانات وإظهار الاختبار
                userInfoContainer.style.display = 'none';
                quizHeader.style.display = 'block';
                quizContainer.style.display = 'block';
                progressContainer.style.display = 'block';
                navigation.style.display = 'flex';
                
                // بدء الاختبار
                initQuiz();
            });
            
            // أسئلة اختبار الذكاء الصعبة جدًا (25 سؤالًا)
            const questions = [
                {
                    question: "إذا كان (س + ص)² = 100 و س² + ص² = 60، فما قيمة س × ص؟",
                    options: ["10", "15", "20", "25"],
                    answer: 2,
                    explanation: "(س+ص)² = س² + 2سص + ص² = 100، بما أن س²+ص²=60 إذن 2سص=40 ⇒ سص=20"
                },
                {
                    question: "ما هو الرقم التالي في المتتالية: 2, 3, 5, 7, 11, 13, 17, ___؟",
                    options: ["19", "21", "23", "25"],
                    answer: 0,
                    explanation: "هذه متتالية الأعداد الأولية، والعدد الأولي التالي هو 19"
                },
                {
                    question: "إذا كان اليوم هو السبت، فما سيكون اليوم بعد 100 يوم من اليوم؟",
                    options: ["الاثنين", "الثلاثاء", "الأحد", "السبت"],
                    answer: 0,
                    explanation: "100 يوم = 14 أسبوعًا ويومين (14×7=98)، إذن بعد يومين من السبت يكون الاثنين"
                },
                {
                    question: "ما هو الحل للمعادلة: 3^(س) + 3^(س+1) = 108؟",
                    options: ["2", "3", "4", "5"],
                    answer: 1,
                    explanation: "3^س + 3×3^س = 108 ⇒ 4×3^س=108 ⇒ 3^س=27 ⇒ س=3"
                },
                {
                    question: "إذا كانت نسبة أ إلى ب هي 3:4 ونسبة ب إلى ج هي 5:6، فما نسبة أ إلى ج؟",
                    options: ["5:8", "15:24", "9:10", "7:9"],
                    answer: 1,
                    explanation: "أ:ب:ج = 15:20:24 (بضرب النسبتين)، إذن أ:ج = 15:24"
                },
                {
                    question: "ما هو مجموع الأعداد الفردية من 1 إلى 99؟",
                    options: ["2500", "2400", "2450", "2550"],
                    answer: 0,
                    explanation: "المجموع = ن² حيث ن عدد الحدود = 50 ⇒ 50² = 2500"
                },
                {
                    question: "إذا كان 5 عمال يستطيعون بناء 5 منازل في 5 أيام، فكم من الوقت يحتاج 100 عامل لبناء 100 منزل؟",
                    options: ["5 أيام", "100 يوم", "20 يوم", "50 يوم"],
                    answer: 0,
                    explanation: "كل عامل يبني منزلًا واحدًا في 5 أيام بغض النظر عن عدد العمال"
                },
                {
                    question: "ما هو العدد الذي إذا ضربته في نفسه وأضفت إليه 5 يصبح الناتج 30؟",
                    options: ["4", "5", "6", "7"],
                    answer: 1,
                    explanation: "5 × 5 = 25، 25 + 5 = 30"
                },
                {
                    question: "إذا كانت 3 أقلام تكلف 6 دولارات، فكم تكلف 5 أقلام؟",
                    options: ["8 دولارات", "9 دولارات", "10 دولارات", "12 دولارًا"],
                    answer: 2,
                    explanation: "سعر القلم الواحد = 6 ÷ 3 = 2 دولار، إذن 5 أقلام = 5 × 2 = 10 دولارات"
                },
                {
                    question: "ما هو العدد الذي يمثل 25% من 25% من 400؟",
                    options: ["10", "20", "25", "50"],
                    answer: 2,
                    explanation: "25% من 400 = 100، ثم 25% من 100 = 25"
                },
                {
                    question: "إذا كان عمر أحمد ثلاثة أضعاف عمر علي، وعمر علي 10 سنوات، فكم عمر أحمد؟",
                    options: ["10 سنوات", "20 سنة", "30 سنة", "40 سنة"],
                    answer: 2,
                    explanation: "عمر أحمد = 3 × عمر علي = 3 × 10 = 30 سنة"
                },
                {
                    question: "ما هو الرقم الناقص في هذه السلسلة: 8, 16, 32, 64, ___, 256؟",
                    options: ["96", "124", "128", "148"],
                    answer: 2,
                    explanation: "النمط هو ضرب كل رقم في 2: 8×2=16، 16×2=32، 32×2=64، 64×2=128، 128×2=256"
                },
                {
                    question: "إذا كان 20% من عدد ما يساوي 30، فما هو هذا العدد؟",
                    options: ["60", "120", "150", "180"],
                    answer: 2,
                    explanation: "20% من العدد = 30، إذن العدد = 30 ÷ 0.20 = 150"
                },
                {
                    question: "ما هو الشكل التالي في التسلسل: ▲, ▲▼, ▲▼▲, ▲▼▲▼, ___؟",
                    options: ["▲▼▲▼▲", "▲▼▲▼", "▼▲▼▲▼", "▲▲▼▼▲"],
                    answer: 0,
                    explanation: "النمط هو إضافة شكل بالتناوب: ▲ ثم ▲▼ ثم ▲▼▲ ثم ▲▼▲▼ ثم ▲▼▲▼▲"
                },
                {
                    question: "إذا كان اليوم هو الخميس، فكم مرة سيأتي يوم الأحد في الـ 50 يومًا القادمة؟",
                    options: ["5", "6", "7", "8"],
                    answer: 2,
                    explanation: "50 يومًا = 7 أسابيع ويوم واحد (7×7=49)، سيكون هناك 7 أيام أحد خلال الأسابيع السبعة"
                },
                {
                    question: "ما هو الشيء الذي كلما أخذت منه أكثر، كلما أصبح أكبر؟",
                    options: ["الحفرة", "الماء", "الوقت", "المال"],
                    answer: 0,
                    explanation: "كلما أخذت ترابًا من الحفرة (أي حفرت أكثر)، كلما كبرت الحفرة"
                },
                {
                    question: "إذا كان س + ص = 15 وس - ص = 5، فما قيمة س؟",
                    options: ["5", "10", "15", "20"],
                    answer: 1,
                    explanation: "بجمع المعادلتين: 2س = 20 ⇒ س = 10"
                },
                {
                    question: "ما هو العدد الذي إذا قسمته على 2 ثم أضفت إليه 10 أصبح الناتج 20؟",
                    options: ["10", "15", "20", "25"],
                    answer: 2,
                    explanation: "(س ÷ 2) + 10 = 20 ⇒ س ÷ 2 = 10 ⇒ س = 20"
                },
                {
                    question: "إذا كان 3 قطط تمسك ب3 فئران في 3 دقائق، فكم دقيقة تحتاج 100 قطة لتمسك ب100 فأر؟",
                    options: ["1 دقيقة", "3 دقائق", "30 دقيقة", "100 دقيقة"],
                    answer: 1,
                    explanation: "كل قطة تحتاج 3 دقائق لتمسك بفأر واحد، بغض النظر عن عدد القطط"
                },
                {
                    question: "ما هو الرقم الذي إذا ضربته في 4 ثم طرحت منه 10 أصبح الناتج 30؟",
                    options: ["5", "10", "15", "20"],
                    answer: 1,
                    explanation: "4س - 10 = 30 ⇒ 4س = 40 ⇒ س = 10"
                },
                {
                    question: "إذا كان عمر الأب ثلاثة أضعاف عمر الابن، والفرق بين عمريهما 20 سنة، فكم عمر الأب؟",
                    options: ["20 سنة", "30 سنة", "40 سنة", "50 سنة"],
                    answer: 1,
                    explanation: "عمر الأب = 3عمر الابن، عمر الأب - عمر الابن = 20 ⇒ 2عمر الابن = 20 ⇒ عمر الابن = 10 ⇒ عمر الأب = 30"
                },
                {
                    question: "ما هو العدد الذي إذا ضربته في نفسه ثم طرحت منه 16 أصبح الناتج 20؟",
                    options: ["4", "5", "6", "7"],
                    answer: 2,
                    explanation: "س² - 16 = 20 ⇒ س² = 36 ⇒ س = 6"
                },
                {
                    question: "إذا كان 5 كتب تكلف 50 دولارًا، فكم تكلف 7 كتب؟",
                    options: ["60 دولارًا", "70 دولارًا", "80 دولارًا", "90 دولارًا"],
                    answer: 1,
                    explanation: "سعر الكتاب = 50 ÷ 5 = 10 دولارات، إذن 7 كتب = 7 × 10 = 70 دولارًا"
                },
                {
                    question: "ما هو العدد الذي يمثل 10% من 50% من 400؟",
                    options: ["10", "20", "30", "40"],
                    answer: 1,
                    explanation: "50% من 400 = 200، ثم 10% من 200 = 20"
                },
                {
                    question: "إذا كان 4 عمال يستطيعون بناء جدار في 6 أيام، فكم يومًا يحتاج 8 عمال لبناء نفس الجدار؟",
                    options: ["2 يوم", "3 أيام", "4 أيام", "5 أيام"],
                    answer: 1,
                    explanation: "عدد العمال مضاعف ⇒ الوقت نصف = 3 أيام"
                }
            ];

            // Quiz variables
            let currentQuestion = 0;
            let userAnswers = new Array(questions.length).fill(null);
            let startTime;
            let timerInterval;
            let score = 0;
            let timeTaken = 0;
            const TEST_DURATION = 30 * 60; // 30 دقيقة بالثواني
            
            // DOM elements
            const quizContainerEl = document.getElementById('quizContainer');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            const resultContainer = document.getElementById('resultContainer');
            const iqScore = document.getElementById('iqScore');
            const iqCircleFill = document.getElementById('iqCircleFill');
            const iqCategory = document.getElementById('iqCategory');
            const iqDescription = document.getElementById('iqDescription');
            const correctAnswersElement = document.getElementById('correctAnswers');
            const timeTakenElement = document.getElementById('timeTaken');
            const percentileElement = document.getElementById('percentile');
            const badgesContainer = document.getElementById('badgesContainer');
            const timerElement = document.getElementById('timer');
            const spinner = document.getElementById('spinner');
            const retakeBtn = document.getElementById('retakeBtn');
            const copyBtn = document.getElementById('copyBtn');
            
            // Initialize the quiz
            function initQuiz() {
                // Create question containers
                questions.forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = `question-container ${index === 0 ? '' : 'hidden'}`;
                    questionDiv.id = `question-${index}`;
                    questionDiv.dataset.questionIndex = index;
                    
                    questionDiv.innerHTML = `
                        <div class="question-number">
                            <i class="fas fa-question"></i> السؤال ${index + 1} من ${questions.length}
                        </div>
                        <div class="question-text">${q.question}</div>
                        <div class="options-container" id="options-${index}">
                            ${q.options.map((option, i) => `
                                <div class="option" data-index="${i}" data-question="${index}">
                                    <input type="radio" name="q${index}" id="q${index}-o${i}" ${userAnswers[index] === i ? 'checked' : ''}>
                                    <label for="q${index}-o${i}" class="option-label">
                                        <span class="option-text">${option}</span>
                                        <span class="option-circle">
                                            <span class="option-circle-inner"></span>
                                        </span>
                                    </label>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    
                    quizContainerEl.appendChild(questionDiv);
                });
                
                // Add event listeners to options
                document.querySelectorAll('.option').forEach(option => {
                    option.addEventListener('click', function() {
                        const questionIndex = parseInt(this.dataset.question);
                        const optionIndex = parseInt(this.dataset.index);
                        
                        // Save user answer
                        userAnswers[questionIndex] = optionIndex;
                        
                        // Update UI
                        document.querySelectorAll(`#options-${questionIndex} .option`).forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        this.classList.add('selected');
                        this.querySelector('input').checked = true;
                        
                        // Enable next button if not on last question
                        if (questionIndex < questions.length - 1) {
                            nextBtn.disabled = false;
                        } else {
                            submitBtn.style.display = 'inline-block';
                            nextBtn.style.display = 'none';
                        }
                        
                        // Enable previous button if going back
                        if (questionIndex > 0) {
                            prevBtn.disabled = false;
                        }
                    });
                });
                
                // Start timer
                startTime = new Date();
                timerInterval = setInterval(updateTimer, 1000);
                
                // Update progress bar
                updateProgressBar();
            }
            
            // Update timer
            function updateTimer() {
                const now = new Date();
                const elapsed = Math.floor((now - startTime) / 1000);
                const remaining = TEST_DURATION - elapsed;
                
                if (remaining <= 0) {
                    clearInterval(timerInterval);
                    timeTaken = TEST_DURATION;
                    autoSubmitTest();
                    return;
                }
                
                const minutes = Math.floor(remaining / 60);
                const seconds = remaining % 60;
                
                timerElement.textContent = `الوقت المتبقي: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                timerElement.setAttribute('title', `الوقت المتبقي: ${minutes} دقائق و${seconds} ثواني`);
                
                // تغيير اللون عندما يقل الوقت عن 5 دقائق
                if (remaining <= 300) { // 5 دقائق
                    timerElement.style.color = 'var(--danger)';
                    timerElement.classList.add('pulse');
                } else {
                    timerElement.style.color = 'var(--primary)';
                    timerElement.classList.remove('pulse');
                }
            }
            
            // دالة للإرسال التلقائي عند انتهاء الوقت
            function autoSubmitTest() {
                // ملء أي إجابات فارغة بقيمة عشوائية
                for (let i = 0; i < userAnswers.length; i++) {
                    if (userAnswers[i] === null) {
                        userAnswers[i] = Math.floor(Math.random() * questions[i].options.length);
                    }
                }
                
                showResults();
            }
            
            // Update progress bar
            function updateProgressBar() {
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                progressBar.style.width = `${progress}%`;
                progressBar.setAttribute('aria-valuenow', progress);
                progressBar.setAttribute('title', `إتمام ${Math.round(progress)}%`);
            }
            
            // Navigate between questions
            function showQuestion(index) {
                // Hide current question
                document.querySelector(`#question-${currentQuestion}`).classList.add('hidden');
                
                // Show new question
                document.querySelector(`#question-${index}`).classList.remove('hidden');
                currentQuestion = index;
                
                // Update navigation buttons
                prevBtn.disabled = index === 0;
                nextBtn.disabled = index === questions.length - 1 || userAnswers[index] === null;
                
                // Show/hide submit button
                if (index === questions.length - 1 && userAnswers[index] !== null) {
                    submitBtn.style.display = 'inline-block';
                    nextBtn.style.display = 'none';
                } else {
                    submitBtn.style.display = 'none';
                    nextBtn.style.display = 'inline-block';
                }
                
                // Update progress bar
                updateProgressBar();
            }
            
            // Calculate IQ score
            function calculateIQ() {
                // Calculate score (1 point per correct answer)
                score = userAnswers.reduce((total, answer, index) => {
                    return total + (answer === questions[index].answer ? 1 : 0);
                }, 0);
                
                // Calculate raw IQ (scaled to 80-160 range for this test)
                let iq = Math.round(80 + (score / questions.length) * 80);
                
                // Calculate time taken in minutes
                const endTime = new Date();
                timeTaken = (endTime - startTime) / 1000; // in seconds
                const timeTakenMinutes = timeTaken / 60;
                
                // Adjust IQ based on time (faster completion gives slight bonus)
                const timeAdjustment = Math.max(0, 30 - timeTakenMinutes) * 0.5; // تعديل ليكون الحد الأقصى 30 دقيقة
                iq = Math.min(160, iq + timeAdjustment);
                
                return Math.round(iq);
            }
            
            // Get IQ category and description
            function getIQCategory(iq) {
                if (iq >= 145) {
                    return {
                        category: "عبقري - مستوى نادر جدًا",
                        description: "أنت ضمن الـ 0.1% الأذكى في العالم! هذا المستوى من الذكاء يشمل العباقرة والعلماء البارزين. لديك قدرات استثنائية في التفكير المجرد وحل المشكلات المعقدة.",
                        badge: "badge-gold",
                        badgeText: "عبقري"
                    };
                } else if (iq >= 130) {
                    return {
                        category: "متفوق جدًا - مستوى مرتفع جدًا",
                        description: "أنت ضمن الـ 2% الأذكى في العالم! هذا المستوى من الذكاء يؤهلك للتفوق في المجالات الأكاديمية والعلمية. لديك قدرات تحليلية ممتازة وذاكرة قوية.",
                        badge: "badge-gold",
                        badgeText: "متفوق جدًا"
                    };
                } else if (iq >= 120) {
                    return {
                        category: "متفوق - مستوى أعلى من المتوسط",
                        description: "أنت ضمن الـ 10% الأذكى في العالم! لديك قدرات عقلية مميزة تساعدك على التفوق في دراستك أو عملك. يمكنك فهم المفاهيم المعقدة بسرعة نسبيًا.",
                        badge: "badge-silver",
                        badgeText: "متفوق"
                    };
                } else if (iq >= 110) {
                    return {
                        category: "أعلى من المتوسط - مستوى جيد جدًا",
                        description: "أنت أذكى من 75% من الناس. لديك مهارات عقلية جيدة تمكنك من التعامل مع معظم التحديات الفكرية في الحياة اليومية.",
                        badge: "badge-silver",
                        badgeText: "أعلى من المتوسط"
                    };
                } else if (iq >= 90) {
                    return {
                        category: "متوسط - مستوى طبيعي",
                        description: "أنت مثل معظم الناس. هذا المستوى من الذكاء كافٍ للتعامل مع متطلبات الحياة اليومية. يمكنك تطوير ذكائك أكثر بالتعلم المستمر والممارسة.",
                        badge: "badge-bronze",
                        badgeText: "متوسط"
                    };
                } else if (iq >= 80) {
                    return {
                        category: "أقل من المتوسط - مستوى مقبول",
                        description: "قد تحتاج إلى بذل جهد أكبر في بعض المهام العقلية مقارنة بالآخرين، ولكن مع المثابرة والتدريب يمكنك تحسين أدائك في مختلف المجالات.",
                        badge: "badge-bronze",
                        badgeText: "أقل من المتوسط"
                    };
                } else {
                    return {
                        category: "محدود - مستوى منخفض",
                        description: "قد تواجه صعوبات في بعض المهام العقلية المعقدة. ننصحك بممارسة تمارين تنشيط الذاكرة والتفكير المنطقي لتحسين أدائك.",
                        badge: "",
                        badgeText: ""
                    };
                }
            }
            
            // Calculate percentile
            function calculatePercentile(iq) {
                // Simplified percentile calculation based on normal distribution
                if (iq >= 145) return "99.9%";
                if (iq >= 130) return "98%";
                if (iq >= 120) return "90%";
                if (iq >= 110) return "75%";
                if (iq >= 90) return "50%";
                if (iq >= 80) return "25%";
                return "10%";
            }
            
            // Show results
            function showResults() {
                clearInterval(timerInterval);
                
                // Show loading spinner
                spinner.style.display = 'block';
                submitBtn.disabled = true;
                
                // Simulate processing delay
                setTimeout(() => {
                    spinner.style.display = 'none';
                    
                    // Calculate IQ
                    const iq = calculateIQ();
                    const categoryInfo = getIQCategory(iq);
                    const percentile = calculatePercentile(iq);
                    
                    // Display results
                    iqScore.textContent = iq;
                    iqCategory.textContent = categoryInfo.category;
                    iqDescription.textContent = categoryInfo.description;
                    correctAnswersElement.textContent = `${score}/${questions.length}`;
                    
                    // Format time taken
                    const minutes = Math.floor(timeTaken / 60);
                    const seconds = Math.floor(timeTaken % 60);
                    timeTakenElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                    
                    percentileElement.textContent = percentile;
                    
                    // إظهار بيانات المستخدم في النتائج
                    const userInfoHTML = `
                        <div class="user-result-info" style="margin-bottom: 20px; padding: 15px; background: var(--light); border-radius: 10px;">
                            <h3 style="color: var(--primary); margin-bottom: 10px;">معلومات المشارك</h3>
                            <p style="margin-bottom: 5px;"><strong>الاسم:</strong> ${userName}</p>
                            <p style="margin-bottom: 5px;"><strong>العمر:</strong> ${userAge}</p>
                            ${userEmail ? `<p><strong>البريد الإلكتروني:</strong> ${userEmail}</p>` : ''}
                        </div>
                    `;
                    
                    // إدراج معلومات المستخدم قبل النتائج
                    resultContainer.insertAdjacentHTML('afterbegin', userInfoHTML);
                    
                    // Animate IQ circle
                    const iqPercentage = ((iq - 80) / 80) * 180; // Scale 80-160 to 0-180 degrees
                    iqCircleFill.style.transform = `rotate(${iqPercentage}deg)`;
                    iqCircleFill.style.borderImageSource = `linear-gradient(to right, var(--primary), var(--accent))`;
                    iqCircleFill.style.borderImageSlice = 1;
                    
                    // Add badges if earned
                    badgesContainer.innerHTML = '';
                    if (categoryInfo.badge) {
                        const badge = document.createElement('div');
                        badge.className = `badge ${categoryInfo.badge}`;
                        badge.textContent = categoryInfo.badgeText;
                        badgesContainer.appendChild(badge);
                    }
                    
                    if (score === questions.length) {
                        const perfectBadge = document.createElement('div');
                        perfectBadge.className = 'badge badge-gold';
                        perfectBadge.textContent = 'نتيجة كاملة';
                        badgesContainer.appendChild(perfectBadge);
                    }
                    
                    if (timeTaken < 600) { // Less than 10 minutes
                        const speedBadge = document.createElement('div');
                        speedBadge.className = 'badge badge-silver';
                        speedBadge.textContent = 'سريع جدًا';
                        badgesContainer.appendChild(speedBadge);
                    }
                    
                    // Show result container
                    resultContainer.style.display = 'block';
                    resultContainer.classList.add('fade-in');
                    
                    // Hide quiz container
                    quizHeader.style.display = 'none';
                    quizContainer.style.display = 'none';
                    navigation.style.display = 'none';
                    progressContainer.style.display = 'none';
                    
                    // Animate IQ score counting up
                    let count = 0;
                    const iqInterval = setInterval(() => {
                        if (count >= iq) {
                            clearInterval(iqInterval);
                        } else {
                            count += Math.ceil(iq / 50);
                            if (count > iq) count = iq;
                            iqScore.textContent = count;
                        }
                    }, 20);
                    
                    // Add share button functionality
                    setupShareButtons(iq);
                    
                }, 1500);
            }
            
            // Setup share buttons
            function setupShareButtons(iq) {
                // إنشاء نص مفصل يحتوي على جميع المعلومات
                let shareDetails = `🌟 نتيجة اختبار الذكاء 🌟\n\n`;
                shareDetails += `👤 الاسم: ${userName}\n`;
                shareDetails += `🎂 العمر: ${userAge}\n`;
                if(userEmail) shareDetails += `📧 البريد الإلكتروني: ${userEmail}\n\n`;
                
                shareDetails += `🧠 معدل الذكاء: ${iq}\n`;
                shareDetails += `📊 الفئة: ${document.getElementById('iqCategory').textContent}\n`;
                shareDetails += `✅ الإجابات الصحيحة: ${score}/${questions.length}\n\n`;
                
                shareDetails += `📝 تفاصيل الإجابات:\n`;
                questions.forEach((q, index) => {
                    const userAnswer = userAnswers[index];
                    const isCorrect = userAnswer === q.answer;
                    shareDetails += `\nس ${index+1}: ${q.question}\n`;
                    shareDetails += `إجابتك: ${q.options[userAnswer]} ${isCorrect ? '✓' : '✗'}\n`;
                    if(!isCorrect) shareDetails += `الإجابة الصحيحة: ${q.options[q.answer]}\n`;
                    shareDetails += `التفسير: ${q.explanation}\n`;
                });
                
                shareDetails += `\n📌 إنشاء وتطوير: إياد شادي`;
                
                // نسخ النتائج إلى الحافظة
                copyBtn.addEventListener('click', function() {
                    navigator.clipboard.writeText(shareDetails).then(() => {
                        alert('تم نسخ النتائج إلى الحافظة! يمكنك مشاركتها الآن');
                    }).catch(err => {
                        console.error('Failed to copy: ', err);
                    });
                });
                
                // مشاركة على وسائل التواصل
                const shareUrl = window.location.href;
                const shareText = `حصلت على معدل ذكاء ${iq} في اختبار الذكاء العالمي!`;
                
                document.querySelector('.facebook').addEventListener('click', () => {
                    shareOnSocial('facebook', shareText, shareUrl);
                });
                
                document.querySelector('.twitter').addEventListener('click', () => {
                    shareOnSocial('twitter', `${shareText}\n\n${shareDetails}`, shareUrl);
                });
                
                document.querySelector('.whatsapp').addEventListener('click', () => {
                    shareOnSocial('whatsapp', `${shareText}\n\n${shareDetails}`, shareUrl);
                });
                
                document.querySelector('.linkedin').addEventListener('click', () => {
                    shareOnSocial('linkedin', shareText, shareUrl);
                });
                
                // مشاركة عبر البريد الإلكتروني
                if(userEmail) {
                    const emailBtn = document.createElement('div');
                    emailBtn.className = 'share-btn';
                    emailBtn.style.backgroundColor = '#d63031';
                    emailBtn.innerHTML = '<i class="fas fa-envelope"></i>';
                    emailBtn.title = 'إرسال بالبريد';
                    emailBtn.addEventListener('click', () => {
                        window.open(`mailto:?subject=نتيجة اختبار الذكاء&body=${encodeURIComponent(shareDetails)}`);
                    });
                    document.querySelector('.share-buttons').appendChild(emailBtn);
                }
            }
            
            // Share on social media
            function shareOnSocial(platform, text, url) {
                let shareUrl = '';
                const encodedText = encodeURIComponent(text);
                const encodedUrl = encodeURIComponent(url);
                
                switch (platform) {
                    case 'facebook':
                        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}&quote=${encodedText}`;
                        break;
                    case 'twitter':
                        shareUrl = `https://twitter.com/intent/tweet?text=${encodedText}&url=${encodedUrl}`;
                        break;
                    case 'whatsapp':
                        shareUrl = `https://wa.me/?text=${encodedText}%20${encodedUrl}`;
                        break;
                    case 'linkedin':
                        shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodedUrl}`;
                        break;
                }
                
                window.open(shareUrl, '_blank', 'width=600,height=400');
            }
            
            // Retake quiz
            function retakeQuiz() {
                // Reset variables
                currentQuestion = 0;
                userAnswers = new Array(questions.length).fill(null);
                score = 0;
                timeTaken = 0;
                
                // Reset UI
                resultContainer.style.display = 'none';
                userInfoContainer.style.display = 'block';
                quizHeader.style.display = 'none';
                quizContainer.style.display = 'none';
                progressContainer.style.display = 'none';
                navigation.style.display = 'none';
                
                // Clear previous questions
                quizContainerEl.innerHTML = '';
                
                // Reset form inputs
                document.getElementById('userName').value = '';
                document.getElementById('userAge').value = '';
                document.getElementById('userEmail').value = '';
            }
            
            // Event listeners for navigation buttons
            prevBtn.addEventListener('click', () => {
                if (currentQuestion > 0) {
                    showQuestion(currentQuestion - 1);
                }
            });
            
            nextBtn.addEventListener('click', () => {
                if (currentQuestion < questions.length - 1 && userAnswers[currentQuestion] !== null) {
                    showQuestion(currentQuestion + 1);
                }
            });
            
            submitBtn.addEventListener('click', showResults);
            
            retakeBtn.addEventListener('click', retakeQuiz);
            
            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' && !prevBtn.disabled) {
                    prevBtn.click();
                } else if (e.key === 'ArrowLeft' && !nextBtn.disabled) {
                    nextBtn.click();
                } else if (e.key === 'Enter' && !submitBtn.disabled && submitBtn.style.display !== 'none') {
                    submitBtn.click();
                }
            });
        });
    </script>
</body>
</html>